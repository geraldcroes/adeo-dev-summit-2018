version: '3'

services:
  www:
   build: ./front
   volumes:
    - "./front/static:/static"
   labels:
    - "traefik.frontend.rule=Host:www.cubestore.com"

  api:
   build: ./api
   labels:
    - "traefik.frontend.rule=Host:www.cubestore.com;PathPrefix:/api"
    - "traefik.backend.loadbalancer.stickiness=true"

networks:
  default:
    external:
      name: demo-network
